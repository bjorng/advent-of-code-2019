defmodule Day20Test do
  use ExUnit.Case
  doctest Day20

  test "part 1 with examples" do
    assert Day20.part1(example1()) == 23
    assert Day20.part1(example2()) == 58
  end

  test "part 1 with my input" do
    assert Day20.part1(input()) == 482
  end

  test "part 2 with examples" do
    assert Day20.part2(example1()) == 26
    assert Day20.part2(example3()) == 396
  end

  test "part 2 with my input" do
    assert Day20.part2(input()) == 5912
  end

  defp example1() do
    ["         A           ",
     "         A           ",
     "  #######.#########  ",
     "  #######.........#  ",
     "  #######.#######.#  ",
     "  #######.#######.#  ",
     "  #######.#######.#  ",
     "  #####  B    ###.#  ",
     "BC...##  C    ###.#  ",
     "  ##.##       ###.#  ",
     "  ##...DE  F  ###.#  ",
     "  #####    G  ###.#  ",
     "  #########.#####.#  ",
     "DE..#######...###.#  ",
     "  #.#########.###.#  ",
     "FG..#########.....#  ",
     "  ###########.#####  ",
     "             Z       ",
     "             Z       "]
  end

  defp example2() do
    ["                   A               ",
     "                   A               ",
     "  #################.#############  ",
     "  #.#...#...................#.#.#  ",
     "  #.#.#.###.###.###.#########.#.#  ",
     "  #.#.#.......#...#.....#.#.#...#  ",
     "  #.#########.###.#####.#.#.###.#  ",
     "  #.............#.#.....#.......#  ",
     "  ###.###########.###.#####.#.#.#  ",
     "  #.....#        A   C    #.#.#.#  ",
     "  #######        S   P    #####.#  ",
     "  #.#...#                 #......VT",
     "  #.#.#.#                 #.#####  ",
     "  #...#.#               YN....#.#  ",
     "  #.###.#                 #####.#  ",
     "DI....#.#                 #.....#  ",
     "  #####.#                 #.###.#  ",
     "ZZ......#               QG....#..AS",
     "  ###.###                 #######  ",
     "JO..#.#.#                 #.....#  ",
     "  #.#.#.#                 ###.#.#  ",
     "  #...#..DI             BU....#..LF",
     "  #####.#                 #.#####  ",
     "YN......#               VT..#....QG",
     "  #.###.#                 #.###.#  ",
     "  #.#...#                 #.....#  ",
     "  ###.###    J L     J    #.#.###  ",
     "  #.....#    O F     P    #.#...#  ",
     "  #.###.#####.#.#####.#####.###.#  ",
     "  #...#.#.#...#.....#.....#.#...#  ",
     "  #.#####.###.###.#.#.#########.#  ",
     "  #...#.#.....#...#.#.#.#.....#.#  ",
     "  #.###.#####.###.###.#.#.#######  ",
     "  #.#.........#...#.............#  ",
     "  #########.###.###.#############  ",
     "           B   J   C               ",
     "           U   P   P               "]
  end

  defp example3() do
    ["             Z L X W       C                 ",
     "             Z P Q B       K                 ",
     "  ###########.#.#.#.#######.###############  ",
     "  #...#.......#.#.......#.#.......#.#.#...#  ",
     "  ###.#.#.#.#.#.#.#.###.#.#.#######.#.#.###  ",
     "  #.#...#.#.#...#.#.#...#...#...#.#.......#  ",
     "  #.###.#######.###.###.#.###.###.#.#######  ",
     "  #...#.......#.#...#...#.............#...#  ",
     "  #.#########.#######.#.#######.#######.###  ",
     "  #...#.#    F       R I       Z    #.#.#.#  ",
     "  #.###.#    D       E C       H    #.#.#.#  ",
     "  #.#...#                           #...#.#  ",
     "  #.###.#                           #.###.#  ",
     "  #.#....OA                       WB..#.#..ZH",
     "  #.###.#                           #.#.#.#  ",
     "CJ......#                           #.....#  ",
     "  #######                           #######  ",
     "  #.#....CK                         #......IC",
     "  #.###.#                           #.###.#  ",
     "  #.....#                           #...#.#  ",
     "  ###.###                           #.#.#.#  ",
     "XF....#.#                         RF..#.#.#  ",
     "  #####.#                           #######  ",
     "  #......CJ                       NM..#...#  ",
     "  ###.#.#                           #.###.#  ",
     "RE....#.#                           #......RF",
     "  ###.###        X   X       L      #.#.#.#  ",
     "  #.....#        F   Q       P      #.#.#.#  ",
     "  ###.###########.###.#######.#########.###  ",
     "  #.....#...#.....#.......#...#.....#.#...#  ",
     "  #####.#.###.#######.#######.###.###.#.#.#  ",
     "  #.......#.......#.#.#.#.#...#...#...#.#.#  ",
     "  #####.###.#####.#.#.#.#.###.###.#.###.###  ",
     "  #.......#.....#.#...#...............#...#  ",
     "  #############.#.#.###.###################  ",
     "               A O F   N                     ",
     "               A A D   M                    "]
  end

  defp input do
    File.read!('input.txt')
    |> String.split("\n")
  end
end
